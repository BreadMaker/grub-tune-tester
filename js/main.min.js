var r,d=new(window.AudioContext||window.webkitAudioContext);function t(e){var n=e.split(" "),t={};for(t.tempo=parseInt(n[0]),t.tune=[],n=n.splice(1);0<n.length;)t.tune.push({frequency:parseInt(n[0]),duration:parseInt(n[1])}),n=n.splice(2);return t}function o(e){for(var n=0,t=0;t<e.tune.length;t++)n+=1/(e.tempo/60)*e.tune[t].duration;$("#notes").text(e.tune.length),$("#duration").text(Math.round(1e3*n))}function n(e){if(isNaN(e.tempo))$("#tune, #play").removeClass("disabled").removeAttr("disabled");else for(var n=d.currentTime,t=e.tune.length,o=0,a=d.createGain(),i=0;i<t;i++){var u=d.createOscillator();u.connect(a),a.connect(d.destination),a.gain.value=.125,o=1/(e.tempo/60)*e.tune[i].duration,u.type="square",u.frequency.value=e.tune[i].frequency,i==t-1&&(u.onended=function(e){$("#tune, #play").removeClass("disabled").removeAttr("disabled"),cancelAnimationFrame(r)}),u.start(n),u.stop(n+o),n+=o}}$(document).ready(function(){new ClipboardJS("#copy",{text:function(e){return $("#tune").val()}}).on("success",function(){$("#copy").popup("change content","Copied!")}),$("#copy").popup(),$("#tune").dropdown({onChange:function(e,n){o(t(n))},allowAdditions:!0,hideAdditions:!1}).trigger("change"),$("#tune-form").submit(function(e){e.preventDefault(),$("#tune, #play").addClass("disabled").attr("disabled","disabled"),r=requestAnimationFrame(n(t($("#tune").val())))}),o(t($("#tune").val()))});
//# sourceMappingURL=main.min.js.map