var e,t=new(window.AudioContext||window.webkitAudioContext);function n(e){var t=e.split(" "),n={};for(n.tempo=parseInt(t[0]),n.tune=[],t=t.splice(1);t.length>0;)n.tune.push({frequency:parseInt(t[0]),duration:parseInt(t[1])}),t=t.splice(2);return n}function a(e){for(var t=0,n=0;n<e.tune.length;n++)t+=1/(e.tempo/60)*e.tune[n].duration;$("#notes").text(e.tune.length),$("#duration").text(Math.round(1e3*t))}function o(n){if(isNaN(n.tempo))$("#tune, #play").removeClass("disabled").removeAttr("disabled");else for(var a=t.currentTime,o=n.tune.length,i=0,r=t.createGain(),u=0;u<o;u++){var d=t.createOscillator();d.connect(r),r.connect(t.destination),r.gain.value=.125,i=1/(n.tempo/60)*n.tune[u].duration,d.type="square",d.frequency.value=n.tune[u].frequency,u==o-1&&(d.onended=function(t){$("#tune, #play").removeClass("disabled").removeAttr("disabled"),cancelAnimationFrame(e)}),d.start(a),d.stop(a+i),a+=i}}$(document).ready(function(){$("#tune").dropdown({onChange:function(e,t){a(n(t))},allowAdditions:!0,hideAdditions:!1}).trigger("change"),$("#tune-form").submit(function(t){t.preventDefault(),$("#tune, #play").addClass("disabled").attr("disabled","disabled"),e=requestAnimationFrame(o(n($("#tune").val())))}),a(n($("#tune").val()))});
//# sourceMappingURL=main.min.js.map